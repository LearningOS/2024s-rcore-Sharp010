## 编程作业

1.实现`sys_task_info`系统调用获取任务信息

> 每个task都应该有独立的task_info，考虑将task_info维护在TaskControlBlock内，每次获取任务信息时通过获取当前任务取出。
>
> 每次syscall时取出当前task维护taskinfo

## 简答作业

1.`ch2b_bad_address.rs`:StoreFault,没有虚拟地址时0x0属于内核地址，用户程序不能直接访问

`ch2b_bad_instructions.rs`:IllegalInstruction，U态不能执行S态特权指令`sret`

`ch2b_bad_register.rs`:InstructionFault，U态不能直接访问CSR寄存器 

sbi:  RustSBI version 0.3.0-alpha.2

2.

​	1.a0指向分配 Trap 上下文之后的内核栈栈顶。 __restore两种使用场景:[1].恢复trap上下文  [2].执行一个应用程序

​	2.恢复sstatus寄存器的值：`sret`返回用户态时需要sstatus的值设置特权级

恢复sepc寄存器的值：`sret`返回用户态时需要跳转到sepc指定的指令位置继续执行

恢复sscratch寄存器的值：用于恢复用户栈指针

​      3.x0寄存器被硬编码为0，x4寄存器用于存放线程指针，x0不需要管理，x4用不到。

​	 4.sp指向用户栈栈顶，sscratch 指向内核栈栈顶

​	 5.`sret `,sret执行时会将当前的特权级按照sstatus的SPP字段设置为U,并且让CPU 跳转到 `sepc` 寄存器指向的那条指令，然后继续执行。

​	 6.sp指向内核栈栈顶，sscratch 指向用户栈栈顶

​	  7.`ecall`

## 荣誉准则

1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 **以下各位** 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

   > 独立完成，无交流对象。

2. 此外，我也参考了 **以下资料** ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

   > 仅参考rCore-Tutorial-Guide-2024S官方文档。

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。
